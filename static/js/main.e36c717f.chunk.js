(this.webpackJsonpwebgal=this.webpackJsonpwebgal||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(2),o=n.n(i),s=(n(22),n(23),n(4)),l=n(5),r=n(12),u=n(6);function d(e){if(e<H().currentScene.length){var t="";if(""!==H().currentScene[e][1]){var n=H().currentScene[e][1];return H().currentScene[e][1].split("vocal-").length>1&&(t=H().currentScene[e][1].split("vocal-")[1].split(",")[0],n=H().currentScene[e][1].split("vocal-")[1].slice(H().currentScene[e][1].split("vocal-")[1].split(",")[0].length+1)),ee("showName",H().currentScene[e][0]),{name:te("showName"),text:n,vocal:t}}var a=H().currentScene[e][0];return H().currentScene[e][0].split("vocal-").length>1&&(t=H().currentScene[e][0].split("vocal-")[1].split(",")[0],a=(a=H().currentScene[e][0].split("vocal-")[1].slice(H().currentScene[e][0].split("vocal-")[1].split(",")[0].length+1)).split(";")[0]),{name:te("showName"),text:a,vocal:t}}}function m(e){var t=new Map([["TitleScreen","div#Title"],["TextBox","div#bottomBox"],["SaveScreen","div#Save"],["LoadScreen","div#Load"],["SettingScreen","div#settings"],["BacklogScreen","div#backlog"],["PanicScreen","div#panic-overlay"]]),n=!1;"string"===typeof e?(e=[e],n=!0):void 0===e&&(e=Array.from(t.keys()));var a,c=new Map,i=Object(u.a)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=t.get(o);if(void 0===s)throw new RangeError("No widget named ".concat(o,"."));var l=document.querySelector(s),r=l.style.display;""===r&&(r=window.getComputedStyle(l).display),c.set(o,"none"!==r)}}catch(d){i.e(d)}finally{i.f()}return n&&(c=c.values().next().value),c}function g(e,t){"string"===typeof t?t=[t]:void 0===t&&(t=[]);var n,a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var c=Object(r.a)(n.value,2),i=c[0];if(!0===c[1]&&!t.includes(i))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}var v=n(16),f=n(11),h=n.n(f),j=n(14),b=function(){function e(){Object(s.a)(this,e),this.maxRequestBatch=6,this.minRequestInterval=3e3,this._prefetchPipeline=[],this._batchID=void 0,this._cachedAssets=new Set,this._currentCursor={scene:"",idx:0}}return Object(l.a)(e,[{key:"onSceneChange",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,c,i,o,s=this,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:0,a=this._syncCacheInfo(),t!==this._currentCursor.scene||n!==this._currentCursor.idx){e.next=4;break}return e.abrupt("return");case 4:return this._currentCursor.scene=t,this._currentCursor.idx=n,this.signalPause(),this.flushPipeline(),e.next=10,fetch(t);case 10:if((c=e.sent).ok){e.next=13;break}throw new Error("[prefetcher] request for ".concat(t," failed with status ").concat(c.status));case 13:return e.t0=x,e.next=16,c.text();case 16:return e.t1=e.sent,e.t2={sceneUrl:t,startLine:1+n},i=(0,e.t0)(e.t1,e.t2),o=i.urgent.map((function(e){return fetch(e)})),e.next=22,a;case 22:return i.all.forEach((function(e){(s._cachedAssets.has(e)||i.urgent.includes(e))&&i.all.delete(e)})),this.flushPipeline(),this._addToPipeline(i),this.signalResume(),i.map.get("scene").forEach((function(e){return s.suggestNextScene(e)})),e.abrupt("return",Promise.allSettled(o));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addToPipeline",value:function(e){var t;(t=this._prefetchPipeline).push.apply(t,Object(v.a)(e.all))}},{key:"suggestNextScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new URLSearchParams([["expand",!0],["start-idx",t]]).toString();this._prefetchPipeline.push("".concat(e,"?").concat(n)),this.signalResume()}},{key:"flushPipeline",value:function(){this._prefetchPipeline.length=0}},{key:"signalPause",value:function(){void 0!==this._batchID&&clearTimeout(this._batchID),this._batchID=void 0}},{key:"signalResume",value:function(){var e=this;if(void 0===this._batchID){var t=function t(n){if(n===e._batchID)if(e._prefetchPipeline.length>0)e._fetchBatch(n).then((function(){if(n===e._batchID){e._syncCacheInfo();var a=setTimeout((function(){return t(a)}),e.minRequestInterval);e._batchID=a}}));else{e._syncCacheInfo();var a=setTimeout((function(){return t(a)}),e.minRequestInterval);e._batchID=a}};this._syncCacheInfo();var n=setTimeout((function(){return t(n)}),100);this._batchID=n}}},{key:"_fetchBatch",value:function(e){for(var t=[],n=this.maxRequestBatch;n>0;){var a=this._prefetchPipeline.shift();if(void 0===a)break;this._cachedAssets.has(a)||("scene"===a.split("/",2)[1]?t.push(this._tryExpandScene(a,e)):t.push(fetch(a)),n--)}return Promise.allSettled(t)}},{key:"_tryExpandScene",value:function(e,t){var n=this,a=e.lastIndexOf("?");if(a<0)return fetch(e);var c=new URLSearchParams(e.substring(a));if(e=e.substring(0,a),c.get("expand")!=="".concat(!0))return fetch(e);var i=Number(c.get("start-idx"));return fetch(e).then((function(t){return t.ok&&t.clone().text().then((function(t){var a,c=x(t,{sceneUrl:e,startLine:1+i,urgentLine:6,maxLine:6}),o=Object(u.a)(c.urgent);try{for(o.s();!(a=o.n()).done;){var s=a.value;n._cachedAssets.has(s)||n._prefetchPipeline.includes(s)||n._prefetchPipeline.push(s)}}catch(l){o.e(l)}finally{o.f()}})),t}))}},{key:"_syncCacheInfo",value:function(){var e=Object(j.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.caches){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,caches.open("webgal-cache-v1");case 4:return t=e.sent,e.next=7,t.keys();case 7:n=e.sent,this._cachedAssets=new Set(n.map((function(e){return e.url.substring(window.location.href.length)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sceneUrl,a=void 0===n?"":n,c=t.startLine,i=void 0===c?1:c,o=t.urgentLine,s=void 0===o?8:o,l=t.maxLine,d=void 0===l?Number.POSITIVE_INFINITY:l,m=new Set,g=new Map;["background","bgm","figure","scene","vocal"].forEach((function(e){g.set(e,[])}));var v,f=[],h=function(e){var t="vocal-",n=e.split(",",1)[0];return n.length<e.length&&n.length>t.length&&n.startsWith(t)?n.substring(t.length):""},j=function(e,t,n){var c="game/".concat(e,"/").concat(t);return!(m.has(c)||"scene"===e&&c===a)&&(m.add(c),g.get(e).push(c),n+1-i<s&&f.push(c),!0)},b=e.split("\n"),x=Object(u.a)(b.entries());try{for(x.s();!(v=x.n()).done;){var y=Object(r.a)(v.value,2),p=y[0],S=y[1];if(p+1-i>=d)break;if(!(p+1<i)){var B=S.split(";",1)[0];if(B){var _=B.split(":",1)[0];if(_.length<B.length){var O=B.substring(_.length+1);if(!O)continue;switch(_){case"changeBG":case"changeBG_next":"none"!==O&&j("background",O,p);break;case"changeP":case"changeP_left":case"changeP_right":case"changeP_next":case"changeP_left_next":case"changeP_right_next":"none"!==O&&j("figure",O,p);break;case"changeScene":j("scene",O,p);break;case"choose":var k,I=O.trim().slice(1,-1).split(","),N=Object(u.a)(I);try{for(N.s();!(k=N.n()).done;){var w=k.value,T=w.split(":");2===T.length&&T[1]&&j("scene",T[1],p)}}catch(L){N.e(L)}finally{N.f()}break;case"bgm":j("bgm",O,p);break;case"intro":case"label":case"jump_label":case"choose_label":break;default:var C=h(O);C&&j("vocal",C,p)}}else{var E=h(_);E&&j("vocal",E,p)}}}}}catch(L){x.e(L)}finally{x.f()}return{all:m,map:g,urgent:f}}var y=new b;function p(){y.suggestNextScene("game/scene/start.txt");var e=te("SceneName");e&&("start.txt"!==e||te("SentenceID"))&&y.suggestNextScene("game/scene/".concat(e),te("SentenceID"))}window.isSecureContext?void 0!==navigator.serviceWorker?window.addEventListener("load",(function(){navigator.serviceWorker.register("webgal-sw.js").then((function(e){e.onupdatefound=function(){window.addEventListener("beforeunload",(function(){e.unregister()})),e.installing.onstatechange=function(e){"activated"===e.target.state&&(console.log("[service worker] claimed"),p())}}})).catch((function(e){console.error("[service worker] registration failed: "+e)}))})):console.log("ServiceWorker not supported."):(console.warn("Context not secure. Requiring HTTPS to enable CacheStorage and ServiceWorker."),window.addEventListener("load",(function(){p(),y.maxRequestBatch=6,y.minRequestInterval=5e3})));var S=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"saveGame",value:function(e){console.log("saving");var t=JSON.stringify(te("all"));q[e]=JSON.parse(t);var n=JSON.stringify(H().CurrentBacklog);console.log(n),F[e]=JSON.parse(n),Z()}},{key:"LoadSavedGame",value:function(e){this.closeLoad(),D.VC_closeChoose(),this.hideTitle("non-restart");var t=q[e],n="game/scene/";n+=t.SceneName,H().currentScene="";var a=null;null!=(a=new XMLHttpRequest)&&(a.open("get",n,!0),a.send(),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){H().currentScene=a.responseText,H().currentScene=H().currentScene.split("\n");for(var c=0;c<H().currentScene.length;c++){var i=H().currentScene[c].split(";")[0],o=i.split(":")[0].length,s=H().currentScene[c].split(":")[0],l=i.slice(o+1);H().currentScene[c]=H().currentScene[c].split(":"),H().currentScene[c][0]=s,H().currentScene[c][1]=l}ee("SentenceID",t.SentenceID),D.VC_restoreStatus(t),console.log(F),H().CurrentBacklog=F[e],console.log(J),ee("all",t),y.onSceneChange(n,te("SentenceID"))}})}},{key:"jumpFromBacklog",value:function(e){this.closeBacklog(),D.VC_closeChoose();for(var t=H().CurrentBacklog[e],n=H().CurrentBacklog.length-1;n>e-1;n--)H().CurrentBacklog.pop();var a="game/scene/";a+=t.SceneName,H().currentScene="";var c=null;null!=(c=new XMLHttpRequest)&&(c.open("get",a,!0),c.send(),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){H().currentScene=c.responseText,H().currentScene=H().currentScene.split("\n");for(var e=0;e<H().currentScene.length;e++){var n=H().currentScene[e].split(";")[0],i=n.split(":")[0].length,o=H().currentScene[e].split(":")[0],s=n.slice(i+1);H().currentScene[e]=H().currentScene[e].split(":"),H().currentScene[e][0]=o,H().currentScene[e][1]=s}ee("SentenceID",t.SentenceID),console.log("restore command sent"),console.log("restoring:"+t),D.VC_restoreStatus(t),ee("all",t),H().CurrentBacklog[H().CurrentBacklog.length]=JSON.parse(JSON.stringify(te("all"))),y.onSceneChange(a,te("SentenceID"))}})}},{key:"hideTitle",value:function(e){H().CurrentBacklog=[],document.getElementById("Title").style.display="none","non-restart"!==e&&(te("all").bgm="",D.loadBGM(),te("all").fig_Name="",te("all").fig_left="",te("all").fig_right="",D.VC_resetStage(),ne("game/scene/start.txt"),te("all").SceneName="start.txt")}},{key:"chooseScene",value:function(e){te("all").SceneName=e,ne("game/scene/"+e),document.getElementById("chooseBox").style.display="none"}},{key:"chooseJumpFun",value:function(e){for(var t=e,n=!1,a=0,c=0;c<H().currentScene.length;c++)"label"===H().currentScene[c][0]&&H().currentScene[c][1]===t&&(n=!0,a=c);n?(ee("SentenceID",a),G(),document.getElementById("chooseBox").style.display="none"):(V(),G(),document.getElementById("chooseBox").style.display="none")}},{key:"clickOnBack",value:function(){H().hideTextStatus?(document.getElementById("bottomBox").style.display="flex",H().hideTextStatus=!1):G()}},{key:"onSetting",value:function(){X(),D.VC_showSettings()}},{key:"onLoadGame",value:function(){X(),document.getElementById("Load").style.display="block",D.VC_showSave_Load("load")}},{key:"onSaveGame",value:function(){X(),document.getElementById("Save").style.display="block",D.VC_showSave_Load("save")}},{key:"closeSettings",value:function(){document.getElementById("settings").style.display="none",document.getElementById("bottomBox").style.display="flex"}},{key:"autoNext",value:function(){0===H().auto?(H().autoWaitTime=H().setAutoWaitTime,H().textShowWaitTime=35,H().fast=0,H().auto=0,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("autoButton").style.boxShadow="none",H().autoWaitTime=H().setAutoWaitTime,H().auto=1,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0.195)",document.getElementById("autoButton").style.boxShadow="0 0 25px rgba(255,255,255,0.5)",G()):1===H().auto&&(H().autoWaitTime=H().setAutoWaitTime,H().auto=0,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("autoButton").style.boxShadow="none")}},{key:"fastNext",value:function(){0===H().fast?(H().autoWaitTime=H().setAutoWaitTime,H().auto=0,document.getElementById("autoButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("autoButton").style.boxShadow="none",H().autoWaitTime=500,H().textShowWaitTime=5,H().fast=1,H().auto=1,document.getElementById("fastButton").style.backgroundColor="rgba(255,255,255,0.195)",document.getElementById("fastButton").style.boxShadow="0 0 25px rgba(255,255,255,0.5)",G()):1===H().fast&&(H().autoWaitTime=H().setAutoWaitTime,H().textShowWaitTime=35,H().fast=0,H().auto=0,document.getElementById("fastButton").style.backgroundColor="rgba(255,255,255,0)",document.getElementById("fastButton").style.boxShadow="none")}},{key:"closeLoad",value:function(){document.getElementById("Load").style.display="none"}},{key:"exit",value:function(){D.showMesModel("\u4f60\u786e\u5b9a\u8981\u9000\u51fa\u5417","\u9000\u51fa","\u7559\u5728\u672c\u9875",(function(){window.close()}))}},{key:"Title",value:function(){D.showMesModel("\u8981\u8fd4\u56de\u5230\u6807\u9898\u754c\u9762\u5417","\u662f","\u4e0d\u8981",(function(){document.getElementById("Title").style.display="block",ee("bgm",H().GameInfo.Title_bgm),D.loadBGM()}))}},{key:"continueGame",value:function(){""===H().currentScene&&(ne("game/scene/start.txt"),te("all").SceneName="start.txt"),document.getElementById("Title").style.display="none"}},{key:"closeSave",value:function(){document.getElementById("Save").style.display="none"}},{key:"closeBacklog",value:function(){document.getElementById("backlog").style.display="none",document.getElementById("bottomBox").style.display="flex"}},{key:"clearIntro",value:function(){document.getElementById("intro").style.display="none",V(),G()}},{key:"hideTextBox",value:function(){H().hideTextStatus||(document.getElementById("bottomBox").style.display="none",H().hideTextStatus=!0)}},{key:"hidePanic",value:function(){document.querySelector("div#panic-overlay").style.display="none"}},{key:"showBacklog",value:function(){D.showBacklog()}}]),e}();document.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("selectstart",(function(e){e.preventDefault()})),document.addEventListener("mouseup",(function(e){if(2===e.button){var t=new KeyboardEvent("keyup",{key:"Delete",code:"Delete"});document.dispatchEvent(t),e.preventDefault()}})),document.addEventListener("wheel",(function(e){var t=m();g(t,"TextBox")&&t.get("TextBox")&&(e.deltaY>0?(G(),e.preventDefault()):e.deltaY<0&&(D.showBacklog(),e.preventDefault()))})),document.addEventListener("keydown",(function(e){if(!(e.isComposing||e.defaultPrevented||e.repeat))switch(e.code){case"ControlLeft":case"ControlRight":g(m(),"TextBox")&&(S.fastNext(),e.preventDefault())}})),document.addEventListener("keyup",(function(e){if(!e.isComposing&&!e.defaultPrevented)switch(e.code){case"ControlLeft":case"ControlRight":g(m(),"TextBox")&&(S.fastNext(),e.preventDefault());break;case"Space":case"Enter":case"NumpadEnter":var t=m();g(t,"TextBox")&&(t.get("TextBox")?G():(document.querySelector("div#bottomBox").style.display="flex",H().hideTextStatus=!1),e.preventDefault());break;case"KeyA":g(m(),"TextBox")&&(S.autoNext(),e.preventDefault());break;case"KeyF":g(m(),"TextBox")&&(S.fastNext(),e.preventDefault());break;case"KeyV":g(m(),"TextBox")&&(D.playVocal(),e.preventDefault());break;case"KeyS":var n=m();g(n,["TextBox","SaveScreen"])&&(n.get("SaveScreen")?S.closeSave():S.onSaveGame(),e.preventDefault());break;case"KeyL":var a=m();g(a,["TextBox","LoadScreen"])&&(a.get("LoadScreen")?S.closeLoad():S.onLoadGame(),e.preventDefault());break;case"KeyC":var c=m();g(c,["TextBox","SettingScreen"])&&(c.get("SettingScreen")?S.closeSettings():S.onSetting(),e.preventDefault());break;case"ArrowUp":g(m(),"TextBox")&&(D.showBacklog(),e.preventDefault());break;case"KeyT":var i=m();g(i,["TextBox","Title"])&&(i.get("Title")?S.continueGame():S.Title(),e.preventDefault());break;case"Delete":if(g(m(["TitleScreen","PanicScreen"]))){var o=m(["TextBox","SaveScreen","LoadScreen","SettingScreen","BacklogScreen"]);g(o,"TextBox")?o.get("TextBox")?(document.querySelector("div#bottomBox").style.display="none",H().hideTextStatus=!0):(document.querySelector("div#bottomBox").style.display="flex",H().hideTextStatus=!1):(o.get("SaveScreen")&&S.closeSave(),o.get("LoadScreen")&&S.closeLoad(),o.get("SettingScreen")&&S.closeSettings(),o.get("BacklogScreen")&&S.closeBacklog()),e.preventDefault()}break;case"Escape":m("PanicScreen")?S.hidePanic():D.showPanic("Yoozle"),e.preventDefault()}}));var B=n(9),_=n(8),O=n(0);function k(e){var t="./game/figure/"+q[e].fig_Name_left,n="./game/figure/"+q[e].fig_Name,a="./game/figure/"+q[e].fig_Name_right,c=[];if("none"!==q[e].fig_Name_left&&""!==q[e].fig_Name_left){var i=Object(O.jsx)("span",{className:"mini_fig mini_fig_left",children:Object(O.jsx)("img",{src:t,alt:"mini_fig",className:"mini_fig_pic"})});c.push(i)}if("none"!==q[e].fig_Name&&""!==q[e].fig_Name){var o=Object(O.jsx)("span",{className:"mini_fig mini_fig_center",children:Object(O.jsx)("img",{src:n,alt:"mini_fig",className:"mini_fig_pic"})});c.push(o)}if("none"!==q[e].fig_Name_right&&""!==q[e].fig_Name_right){var s=Object(O.jsx)("span",{className:"mini_fig mini_fig_right",children:Object(O.jsx)("img",{src:a,alt:"mini_fig",className:"mini_fig_pic"})});c.push(s)}return Object(O.jsx)("div",{id:"ren_SE"+e,className:"miniPic",children:c})}var I=function(e){Object(B.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={buttonState:["","",""]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=["","",""];"small"===K.font_size?e[0]="On":"medium"===K.font_size?e[1]="On":"large"===K.font_size&&(e[2]="On"),this.setState({buttonState:e})}},{key:"componentWillUnmount",value:function(){}},{key:"changeButtonState",value:function(e){0===e?(K.font_size="small",document.getElementById("SceneText").style.fontSize="150%",document.getElementById("previewDiv").style.fontSize="150%"):1===e?(K.font_size="medium",document.getElementById("SceneText").style.fontSize="200%",document.getElementById("previewDiv").style.fontSize="200%"):2===e&&(K.font_size="large",document.getElementById("SceneText").style.fontSize="250%",document.getElementById("previewDiv").style.fontSize="250%");var t=["","",""];"small"===K.font_size?t[0]="On":"medium"===K.font_size?t[1]="On":"large"===K.font_size&&(t[2]="On"),Z(),this.setState({buttonState:t})}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"singleSettingItem",children:[Object(O.jsx)("span",{className:"settingItemTitle",children:"\u5b57\u4f53\u5927\u5c0f"}),Object(O.jsx)("span",{className:"settingItemButton"+this.state.buttonState[0],onClick:function(){e.changeButtonState(0)},children:"\u5c0f"}),Object(O.jsx)("span",{className:"settingItemButton"+this.state.buttonState[1],onClick:function(){e.changeButtonState(1)},children:"\u4e2d"}),Object(O.jsx)("span",{className:"settingItemButton"+this.state.buttonState[2],onClick:function(){e.changeButtonState(2)},children:"\u5927"})]})}}]),n}(c.a.Component),N=function(e){Object(B.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={buttonState:["","",""]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=["","",""];"low"===K.play_speed?e[0]="On":"medium"===K.play_speed?e[1]="On":"fast"===K.play_speed&&(e[2]="On"),this.setState({buttonState:e})}},{key:"componentWillUnmount",value:function(){}},{key:"changeButtonState",value:function(e){0===e?(K.play_speed="low",H().textShowWaitTime=55):1===e?(K.play_speed="medium",H().textShowWaitTime=35):2===e&&(K.play_speed="fast",H().textShowWaitTime=20);var t=["","",""];"low"===K.play_speed?t[0]="On":"medium"===K.play_speed?t[1]="On":"fast"===K.play_speed&&(t[2]="On"),Z(),this.setState({buttonState:t})}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"singleSettingItem",children:[Object(O.jsx)("span",{className:"settingItemTitle",children:"\u64ad\u653e\u901f\u5ea6"}),Object(O.jsx)("span",{className:"settingItemButton"+this.state.buttonState[0],onClick:function(){e.changeButtonState(0)},children:"\u6162"}),Object(O.jsx)("span",{className:"settingItemButton"+this.state.buttonState[1],onClick:function(){e.changeButtonState(1)},children:"\u4e2d"}),Object(O.jsx)("span",{className:"settingItemButton"+this.state.buttonState[2],onClick:function(){e.changeButtonState(2)},children:"\u5feb"})]})}}]),n}(c.a.Component),w=function(e){Object(B.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).Buttons=[],a.SaveButtons=[],a.LoadPageQty=0,a.LoadPageQty=e.PageQty,a.state={currentPage:H().currentLoadPage},a.loadButtons(),a}return Object(l.a)(n,[{key:"setCurrentPage",value:function(e){H().currentLoadPage=e,this.setState({currentPage:H().currentLoadPage}),Z()}},{key:"loadButtons",value:function(){var e=this;this.Buttons=[];for(var t=function(t){var n=Object(O.jsx)("span",{className:"LoadIndexButton LS_indexButton",onClick:function(){e.setCurrentPage(t)},children:t+1},t);t===H().currentLoadPage&&(n=Object(O.jsx)("span",{className:"LoadIndexButtonOn LS_indexButtonOn",onClick:function(){e.setCurrentPage(t)},children:t+1},t)),e.Buttons.push(n)},n=0;n<this.LoadPageQty;n++)t(n)}},{key:"loadSaveButtons",value:function(){var e=this;this.SaveButtons=[];for(var t=function(t){if(q[t]){var n=q[t].showName,a=q[t].showText,c=k(t),i="game/background/"+q[t].bg_Name,o=Object(O.jsxs)("div",{className:"LoadSingleElement LS_singleElement",onClick:function(){S.LoadSavedGame(t)},children:[Object(O.jsx)("div",{className:"ren",style:{backgroundImage:"url(".concat(i,")")},children:c},t),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"LSE_top",children:[Object(O.jsx)("span",{className:"LSE_index",children:t}),Object(O.jsx)("span",{className:"LSE_name",children:n})]}),Object(O.jsx)("div",{className:"LSE_bottom",children:a})]})]},t);e.SaveButtons.push(o)}else{var s=Object(O.jsx)("div",{className:"LoadSingleElement LS_singleElement",children:"\u7a7a"},t);e.SaveButtons.push(s)}},n=6*H().currentLoadPage+1;n<=6*H().currentLoadPage+6;n++)t(n)}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.loadButtons(),this.loadSaveButtons(),Object(O.jsxs)("div",{id:"LoadMain",className:"LS_renderMain",children:[Object(O.jsx)("div",{id:"LoadIndex",className:"LS_Index",children:this.Buttons}),Object(O.jsx)("div",{id:"LoadButtonList",className:"LS_ButtonList",children:this.SaveButtons})]})}}]),n}(c.a.Component),T=function(e){Object(B.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).Buttons=[],a.SaveButtons=[],a.LoadPageQty=0,a.ren_bg_list=[],a.LoadPageQty=e.PageQty,a.state={currentPage:H().currentSavePage},a.loadButtons(),a}return Object(l.a)(n,[{key:"setCurrentPage",value:function(e){H().currentSavePage=e,this.setState({currentPage:H().currentSavePage}),Z()}},{key:"loadButtons",value:function(){var e=this;this.Buttons=[];for(var t=function(t){var n=Object(O.jsx)("span",{className:"SaveIndexButton LS_indexButton",onClick:function(){e.setCurrentPage(t)},children:t+1},t);t===H().currentSavePage&&(n=Object(O.jsx)("span",{className:"SaveIndexButtonOn LS_indexButtonOn",onClick:function(){e.setCurrentPage(t)},children:t+1},t)),e.Buttons.push(n)},n=0;n<this.LoadPageQty;n++)t(n)}},{key:"loadSaveButtons",value:function(){var e=this;this.SaveButtons=[],this.ren_bg_list=[];for(var t=function(t){if(q[t]){var n=q[t].showName,a=q[t].showText,c=k(t),i="game/background/"+q[t].bg_Name,o=Object(O.jsxs)("div",{className:"SaveSingleElement LS_singleElement",onClick:function(){e.save_onSaved(t)},children:[Object(O.jsx)("div",{className:"ren",style:{backgroundImage:"url(".concat(i,")")},children:c},t),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"LSE_top",children:[Object(O.jsx)("span",{className:"LSE_index",children:t}),Object(O.jsx)("span",{className:"LSE_name",children:n})]}),Object(O.jsx)("div",{className:"LSE_bottom",children:a})]})]},t);e.SaveButtons.push(o)}else{var s=Object(O.jsx)("div",{className:"SaveSingleElement LS_singleElement",onClick:function(){e.save_NonSaved(t)},children:"\u7a7a"},t);e.SaveButtons.push(s)}},n=6*H().currentSavePage+1;n<=6*H().currentSavePage+6;n++)t(n)}},{key:"save_NonSaved",value:function(e){S.saveGame(e),Z(),this.setState({currentPage:H().currentSavePage})}},{key:"save_onSaved",value:function(e){D.showMesModel("\u4f60\u8981\u8986\u76d6\u8fd9\u4e2a\u5b58\u6863\u5417","\u8986\u76d6","\u4e0d",(function(){S.saveGame(e),Z(),S.closeSave()})),this.setState({currentPage:H().currentSavePage})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.loadButtons(),this.loadSaveButtons(),Object(O.jsxs)("div",{id:"SaveMain",className:"LS_renderMain",children:[Object(O.jsx)("div",{id:"SaveIndex",className:"LS_Index",children:this.Buttons}),Object(O.jsx)("div",{id:"SaveButtonList",className:"LS_ButtonList",children:this.SaveButtons})]})}}]),n}(c.a.Component);function C(e){return e.id?Object(O.jsxs)("div",{className:"newButton",id:e.id,onClick:function(){e.fun()},children:[Object(O.jsx)("span",{className:"nB_left",style:{borderBottom:"3px solid ".concat(e.color)},children:e.simpleName}),Object(O.jsx)("span",{className:"nB_right",children:e.name})]}):Object(O.jsxs)("div",{className:"newButton",onClick:function(){e.fun()},children:[Object(O.jsx)("span",{className:"nB_left",style:{borderBottom:"3px solid ".concat(e.color)},children:e.simpleName}),Object(O.jsx)("span",{className:"nB_right",children:e.name})]})}var E=function(e){Object(B.a)(n,e);var t=Object(_.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).dummyA=null,e.dummyInput=null,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.dummyA=document.querySelector("a#dummy-saves-exporter"),this.dummyInput=document.querySelector("input#dummy-saves-importer")}},{key:"importSaves",value:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t=e.target.result;localStorage.setItem(M.Game_key,t),X(),window.location.reload()},n.readAsText(t,"UTF-8")}},{key:"exportSaves",value:function(){var e=localStorage.getItem(M.Game_key);if(null===e)return!1;var t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t);return URL.revokeObjectURL(this.dummyA.href),this.dummyA.href=n,this.dummyA.download="saves.json",this.dummyA.click(),!0}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"importer-exporter",children:[Object(O.jsx)("span",{className:"label-saves-exporter",onClick:function(){e.exportSaves()},children:"\u5bfc\u51fa\u5b58\u6863"}),Object(O.jsx)("a",{target:"_blank",id:"dummy-saves-exporter",style:{display:"none"}}),Object(O.jsx)("span",{className:"label-saves-importer",onClick:function(){e.dummyInput.click()},children:"\u5bfc\u5165\u5b58\u6863"}),Object(O.jsx)("input",{type:"file",id:"dummy-saves-importer",style:{display:"none"},onChange:this.importSaves})]})}},{key:"checkSyntax",value:function(e){try{JSON.parse(e)}catch(t){return!1}return!0}}]),n}(c.a.Component),L=(n.p,n.p,n(27)),P=n(28),D=(n(15),function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"VC_changeBG",value:function(e){document.getElementById("mainBackground").style.backgroundImage="url('game/background/"+e+"')"}},{key:"VC_changeP",value:function(e,t){if("center"===t)if("none"===e)o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage")),H().currentInfo.fig_Name="none";else{var n="game/figure/"+e,a=Object(O.jsx)("img",{src:n,alt:"figure",className:"p_center"});o.a.render(a,document.getElementById("figureImage")),H().currentInfo.fig_Name=e}else if("left"===t)if("none"===e)o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage_left")),H().currentInfo.fig_Name_left="none";else{var c="game/figure/"+e,i=Object(O.jsx)("img",{src:c,alt:"figure",className:"p_center"});o.a.render(i,document.getElementById("figureImage_left")),H().currentInfo.fig_Name_left=e}else if("right"===t)if("none"===e)o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage_right")),H().currentInfo.fig_Name_right="none";else{var s="game/figure/"+e,l=Object(O.jsx)("img",{src:s,alt:"figure",className:"p_center"});o.a.render(l,document.getElementById("figureImage_right")),H().currentInfo.fig_Name_right=e}}},{key:"VC_choose",value:function(e,t){if("scene"===t){document.getElementById("chooseBox").style.display="flex";for(var n=[],a=function(t){var a=Object(O.jsx)("div",{className:"singleChoose",onClick:function(){S.chooseScene(e[t][1])},children:e[t][0]},t);n.push(a)},c=0;c<e.length;c++)a(c);o.a.render(Object(O.jsx)("div",{children:n}),document.getElementById("chooseBox"))}if("label"===t){document.getElementById("chooseBox").style.display="flex";for(var i=[],s=function(t){var n=Object(O.jsx)("div",{className:"singleChoose",onClick:function(){S.chooseJumpFun(e[t][1])},children:e[t][0]},t);i.push(n)},l=0;l<e.length;l++)s(l);o.a.render(Object(O.jsx)("div",{children:i}),document.getElementById("chooseBox"))}}},{key:"VC_closeChoose",value:function(){document.getElementById("chooseBox").style.display="none"}},{key:"VC_textShow",value:function(t,n){var a=Object(O.jsx)("span",{children:t}),c=n.split("");o.a.render(a,document.getElementById("pName")),e.showTextArray(c)}},{key:"VC_restoreStatus",value:function(t){console.log("restoring"),console.log(t);var n=t.command;if(""!==t.bg_Name&&(document.getElementById("mainBackground").style.backgroundImage="url('game/background/"+t.bg_Name+"')"),""===t.fig_Name||"none"===t.fig_Name)o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage"));else{var a="game/figure/"+t.fig_Name,c=Object(O.jsx)("img",{src:a,alt:"figure",className:"p_center"});o.a.render(c,document.getElementById("figureImage"))}if(""===t.fig_Name_left||"none"===t.fig_Name_left)o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage_left"));else{var i="game/figure/"+t.fig_Name_left,s=Object(O.jsx)("img",{src:i,alt:"figure",className:"p_center"});o.a.render(s,document.getElementById("figureImage_left"))}if(""===t.fig_Name_right||"none"===t.fig_Name_right)o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage_right"));else{var l="game/figure/"+t.fig_Name_right,r=Object(O.jsx)("img",{src:l,alt:"figure",className:"p_center"});o.a.render(r,document.getElementById("figureImage_right"))}if("choose"===n||"choose_label"===n){for(var u=t.choose,d=(u=(u=u.split("}")[0]).split("{")[1]).split(","),m=0;m<d.length;m++)d[m]=d[m].split(":");var g="";switch(n){case"choose":g="scene";break;case"choose_label":g="label"}e.VC_choose(d,g)}var v=Object(O.jsx)("span",{children:t.showName}),f=t.showText.split("");o.a.render(v,document.getElementById("pName")),ee("vocal",t.vocal),te("bgm")!==t.bgm&&(H().currentInfo.bgm=t.bgm,e.loadBGM()),""===t.miniAvatar&&"none"===t.miniAvatar||e.VC_showMiniAvatar(t.miniAvatar),e.playVocal(),e.showTextArray(f)}},{key:"VC_showSettings",value:function(){var t=Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"settingsItemsList",children:[Object(O.jsx)(I,{}),Object(O.jsx)(N,{}),Object(O.jsx)("div",{className:"deleteCookie",onClick:function(){e.showMesModel("\u4f60\u786e\u5b9a\u8981\u6e05\u9664\u7f13\u5b58\u5417","\u8981","\u4e0d\u8981",$)},children:"\u6e05\u9664\u6240\u6709\u8bbe\u7f6e\u9009\u9879\u4ee5\u53ca\u5b58\u6863"}),Object(O.jsx)(E,{}),Object(O.jsxs)("div",{children:["\u672c\u4f5c\u54c1\u7531 WebGAL \u5f3a\u529b\u9a71\u52a8\uff0c",Object(O.jsx)("a",{href:"https://github.com/MakinoharaShoko/WebGAL",children:"\u4e86\u89e3 WebGAL"}),"\u3002"]}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{className:"settingItemTitle",children:"\u6548\u679c\u9884\u89c8"})]})});document.getElementById("settings").style.display="flex",document.getElementById("bottomBox").style.display="none",o.a.render(t,document.getElementById("settingItems")),o.a.render(Object(O.jsx)("div",{id:"previewDiv"}),document.getElementById("textPreview")),e.showTextPreview("\u73b0\u5728\u9884\u89c8\u7684\u662f\u6587\u672c\u6846\u5b57\u4f53\u5927\u5c0f\u548c\u64ad\u653e\u901f\u5ea6\u7684\u60c5\u51b5\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u60a8\u7684\u89c2\u611f\u8c03\u6574\u4e0a\u9762\u7684\u9009\u9879\u3002")}},{key:"VC_showSave_Load",value:function(e){"save"===e?o.a.render(Object(O.jsx)(T,{PageQty:15}),document.getElementById("SaveItems")):o.a.render(Object(O.jsx)(w,{PageQty:15}),document.getElementById("LoadItems"))}},{key:"VC_resetStage",value:function(){o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage")),o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage_left")),o.a.render(Object(O.jsx)("div",{}),document.getElementById("figureImage_right"))}},{key:"loadBGM",value:function(){console.log("loadingBGM");var e=H().currentInfo.bgm;if(console.log("now playing "+e),console.log(H().currentInfo),""!==e&&"none"!==e){var t="./game/bgm/"+e,n=Object(O.jsx)("audio",{src:t,id:"currentBGM",loop:"loop"});o.a.render(n,document.getElementById("bgm"));var a=document.getElementById("currentBGM"),c=!1;a.oncanplay=function(){!1===c&&(a.currentTime=0,a.volume=.25,c=!0),a.play()},!1===c&&document.getElementById("currentBGM")&&(a.currentTime=0,a.volume=.25,c=!0,a.play())}else o.a.render(Object(O.jsx)("div",{}),document.getElementById("bgm"))}},{key:"playVocal",value:function(){console.log("Playing vocal:");var e=te("all");document.getElementById("currentVocal")&&document.getElementById("currentVocal").pause();var t=e.vocal;if(""!==t){var n="./game/vocal/"+t,a=Object(O.jsx)("audio",{src:n,id:"currentVocal"});o.a.render(a,document.getElementById("vocal"));var c=document.getElementById("currentVocal");c.currentTime=0,c.oncanplay=function(){c.play()}}else o.a.render(Object(O.jsx)("div",{}),document.getElementById("vocal"))}},{key:"showIntro",value:function(e){var t=0,n=Object(O.jsx)("div",{children:Object(O.jsx)("div",{id:"textShowArea",className:"textShowArea_styl"})});o.a.render(n,document.getElementById("intro")),o.a.render(Object(O.jsx)("div",{children:" "}),document.getElementById("textShowArea")),document.getElementById("intro").style.display="block";var a=e.split(","),c=setInterval((function(){var e=Object(O.jsx)("div",{className:"introSingleRow",children:a[t]},t);i.push(e),t+=1,o.a.render(Object(O.jsx)("div",{children:i}),document.getElementById("textShowArea")),t>=a.length&&(clearInterval(c),setTimeout(S.clearIntro,3500))}),1500),i=[]}},{key:"loadButton",value:function(){var e=Object(O.jsxs)("div",{className:"toCenter",children:[Object(O.jsx)(C,{color:"#FEDFE1",fun:this.playVocal,name:"\u91cd\u590d",simpleName:"V"}),Object(O.jsx)(C,{color:"#FB966E",fun:S.autoNext,name:"\u81ea\u52a8",simpleName:"A",id:"autoButton"}),Object(O.jsx)(C,{color:"#FBE251",fun:S.fastNext,name:"\u5feb\u8fdb",simpleName:"F",id:"fastButton"}),Object(O.jsx)(C,{color:"#A5DEE4",fun:S.onSaveGame,name:"\u5b58\u6863",simpleName:"S"}),Object(O.jsx)(C,{color:"#58B2DC",fun:S.onLoadGame,name:"\u8bfb\u6863",simpleName:"L"}),Object(O.jsx)(C,{color:"#B28FCE",fun:S.onSetting,name:"\u8bbe\u7f6e",simpleName:"C"}),Object(O.jsx)(C,{color:"#BDC0BA",fun:S.Title,name:"\u6807\u9898",simpleName:"T"})]});o.a.render(e,document.getElementById("controlBar"))}},{key:"showBacklog",value:function(){document.getElementById("backlog").style.display="block",document.getElementById("bottomBox").style.display="none";for(var e=[],t=function(t){var n=Object(O.jsxs)("div",{className:"backlog_singleElement",children:[Object(O.jsxs)("div",{className:"backlog_interact",children:[Object(O.jsx)("div",{className:"backlog_interact_button",onClick:function(){var e=H().CurrentBacklog[t].vocal;if(""!==e){var n="./game/vocal/"+e,a=Object(O.jsx)("audio",{src:n,id:"backlogVocalAudio-"+t});console.log("Playing! now url is"+n),o.a.render(a,document.getElementById("backlogVocal-"+t));var c=document.getElementById("backlogVocalAudio-"+t),i=!1;i=!1,c.oncanplay=function(){i||(c.currentTime=0,i=!0,c.play()),c.play()},i||(c.currentTime=0,i=!0,c.play())}},children:Object(O.jsx)(L.a,{theme:"outline",size:"24",fill:"#f5f5f7"})}),Object(O.jsx)("div",{className:"backlog_interact_button",onClick:function(){S.jumpFromBacklog(t)},children:Object(O.jsx)(P.a,{theme:"outline",size:"24",fill:"#f5f5f7"})})]}),Object(O.jsx)("div",{className:"backlog_name",children:H().CurrentBacklog[t].showName}),Object(O.jsx)("div",{className:"backlog_content",children:Object(O.jsx)("div",{className:"backlog_text",children:H().CurrentBacklog[t].showText})}),Object(O.jsx)("div",{id:"backlogVocal-"+t})]},t);e.push(n)},n=0;n<H().CurrentBacklog.length;n++)t(n);o.a.render(Object(O.jsx)("div",{children:e}),document.getElementById("backlogContent"))}},{key:"showTextArray",value:function(e){H().showingText=!1,o.a.render(Object(O.jsx)("span",{children:" "}),document.getElementById("SceneText"));var t=[],n=0;clearInterval(a);var a=setInterval((function(){if(H().showingText){var c=Object(O.jsx)("span",{className:"singleWord",children:e[n]},n);t.push(c),o.a.render(Object(O.jsx)("div",{children:t}),document.getElementById("SceneText")),n+=1}else{for(var i="",s=0;s<e.length;s++)i+=e[s];o.a.render(Object(O.jsx)("div",{children:i}),document.getElementById("SceneText")),1===H().auto?n<e.length+1?n=e.length+1:n+=1:n=e.length+1+H().autoWaitTime/35}n>e.length&&1!==H().auto&&(H().showingText=!1);n>e.length+H().autoWaitTime/35&&(1===H().auto?document.getElementById("currentVocal")&&0===W?document.getElementById("currentVocal").ended&&(clearInterval(a),H().showingText=!1,G()):(clearInterval(a),H().showingText=!1,G()):(H().showingText=!1,clearInterval(a)))}),H().textShowWaitTime);H().showingText=!0}},{key:"showTextPreview",value:function(e){H().onTextPreview=H().onTextPreview+1;var t=e.split("");"small"===H().Settings.font_size?document.getElementById("previewDiv").style.fontSize="150%":"medium"===H().Settings.font_size?document.getElementById("previewDiv").style.fontSize="200%":"large"===H().Settings.font_size&&(document.getElementById("previewDiv").style.fontSize="250%"),o.a.render(Object(O.jsx)("span",{children:" "}),document.getElementById("previewDiv"));var n=[],a=0;clearInterval(c);var c=setInterval((function e(){if(H().onTextPreview>1)return H().onTextPreview=H().onTextPreview-1,void clearInterval(c);var i=Object(O.jsx)("span",{className:"singleWord",children:t[a]},a);n.push(i),o.a.render(Object(O.jsx)("div",{children:n}),document.getElementById("previewDiv")),(a+=1)>t.length+1e3/35&&(clearInterval(c),c=setInterval(e,H().textShowWaitTime),a=0,n=[],"small"===H().Settings.font_size?document.getElementById("previewDiv").style.fontSize="150%":"medium"===H().Settings.font_size?document.getElementById("previewDiv").style.fontSize="200%":"large"===H().Settings.font_size&&(document.getElementById("previewDiv").style.fontSize="250%"))}),H().textShowWaitTime)}},{key:"showMesModel",value:function(e,t,n,a){document.getElementById("MesModel").style.display="block";var c=Object(O.jsxs)("div",{className:"MesMainWindow",children:[Object(O.jsx)("div",{className:"MesTitle",children:e}),Object(O.jsxs)("div",{className:"MesChooseContainer",children:[Object(O.jsx)("div",{className:"MesChoose",onClick:function(){a(),document.getElementById("MesModel").style.display="none"},children:t}),Object(O.jsx)("div",{className:"MesChoose",onClick:function(){document.getElementById("MesModel").style.display="none"},children:n})]})]});o.a.render(c,document.getElementById("MesModel"))}},{key:"VC_showMiniAvatar",value:function(e){if(""!==e&&"none"!==e){var t="game/figure/"+e,n=Object(O.jsx)("img",{src:t,className:"miniAvatar_pic",alt:"miniAvatar"});o.a.render(n,document.getElementById("miniAvatar"))}else o.a.render(Object(O.jsx)("div",{}),document.getElementById("miniAvatar"))}},{key:"showPanic",value:function(e){if(document.querySelector("div#panic-overlay").style.display="block","Yoozle"===e){var t=Object(O.jsxs)("div",{className:"yoozle-container",children:[Object(O.jsx)("div",{className:"yoozle-title",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("span",{className:"yoozle-gl-blue",children:"Y"}),Object(O.jsx)("span",{className:"yoozle-gl-red",children:"o"}),Object(O.jsx)("span",{className:"yoozle-gl-yellow",children:"o"}),Object(O.jsx)("span",{className:"yoozle-gl-blue",children:"z"}),Object(O.jsx)("span",{className:"yoozle-gl-green",children:"l"}),Object(O.jsx)("span",{className:"yoozle-gl-red yoozle-e-rotate",children:"e"})]})}),Object(O.jsxs)("div",{className:"yoozle-search",children:[Object(O.jsx)("input",{className:"yoozle-search-bar",type:"text",defaultValue:""}),Object(O.jsxs)("div",{className:"yoozle-search-buttons",children:[Object(O.jsx)("input",{className:"yoozle-btn",type:"submit",value:"Yoozle Search"}),Object(O.jsx)("input",{className:"yoozle-btn",type:"submit",value:"I'm Feeling Lucky"})]})]})]});o.a.render(t,document.querySelector("div#panic-overlay")),document.querySelector("input.yoozle-search-bar").value=""}}}]),e}());function G(){if(H().showingText)H().showingText=!1;else{var e=!1;if(!(te("SentenceID")>=H().currentScene.length)){var t=H().currentScene[te("SentenceID")],n=t[0],a=t[1];if(console.log("------now running NSP------"+t),"changeBG"===n)D.VC_changeBG(a),ee("bg_Name",a),b("on");else if("changeP"===n)D.VC_changeP(a,"center"),ee("fig_Name",a),b("on");else if("changeP_left"===n)D.VC_changeP(a,"left"),ee("fig_Name_left",a),b("on");else if("changeP_right"===n)D.VC_changeP(a,"right"),ee("fig_Name_right",a),b("on");else{if("changeP_next"===n)return D.VC_changeP(a,"center"),ee("fig_Name",a),V(),void G();if("changeP_left_next"===n)return D.VC_changeP(a,"left"),ee("fig_Name_left",a),V(),void G();if("changeP_right_next"===n)return D.VC_changeP(a,"right"),ee("fig_Name_right",a),V(),void G();if("changeBG_next"===n)return D.VC_changeBG(a),V(),ee("bg_Name",a),void G();if("changeScene"===n)return ne("game/scene/"+t[1]),void ee("SceneName",a);if("choose"===n){ee("command",n),ee("choose",a);for(var c=a,i=(c=(c=c.split("}")[0]).split("{")[1]).split(","),o=0;o<i.length;o++)i[o]=i[o].split(":");return void D.VC_choose(i,"scene")}if("bgm"===n)return ee("bgm",a),D.loadBGM(),V(),void G();if("choose_label"===n){ee("command",n),ee("choose",a);for(var s=a,l=(s=(s=s.split("}")[0]).split("{")[1]).split(","),r=0;r<l.length;r++)l[r]=l[r].split(":");return void D.VC_choose(l,"label")}if("jump_label"===n){for(var u=t[1],m=!1,g=0,v=0;v<H().currentScene.length;v++)"label"===H().currentScene[v][0]&&H().currentScene[v][1]===u&&(m=!0,g=v);return m?(ee("SentenceID",g),void G()):(V(),void G())}if("label"===n)return V(),void G();if("intro"===n){var f=t[1];return void D.showIntro(f)}if("miniAvatar"===n)return D.VC_showMiniAvatar(a),ee("miniAvatar",a),V(),void G();if("var"===n.substr(0,3)||"jump_var"===n.substr(0,8))return void function(e,t){if("varSet"===e){t=t.split(";")[0],console.log(t),t=t.split(","),console.log(t);for(var n=0;n<t.length;n++){var a=t[n];a=a.split(":"),console.log(a),H().currentInfo.GameVar[a[0]]=parseInt(a[1])}}else if("varUp"===e){t=t.split(";")[0],console.log(t),t=t.split(",");for(var c=0;c<t.length;c++){var i=t[c];i=i.split(":"),H().currentInfo.GameVar[i[0]]=H().currentInfo.GameVar[i[0]]+parseInt(i[1])}}else if("varDrop"===e){t=t.split(";")[0],console.log(t),t=t.split(",");for(var o=0;o<t.length;o++){var s=t[o];s=s.split(":"),H().currentInfo.GameVar[s[0]]=H().currentInfo.GameVar[s[0]]-parseInt(s[1])}}else if("jump_varReach"===e){t=t.split(";")[0],console.log(t);var l=(t=t.split(","))[0];l=l.split(":");var r=t[1];if(console.log("var data is"+parseInt(l[1])+H().currentInfo.GameVar[l[0]]),H().currentInfo.GameVar[l[0]]>=parseInt(l[1])){for(var u=r,d=!1,m=0,g=0;g<H().currentScene.length;g++)"label"===H().currentScene[g][0]&&H().currentScene[g][1]===u&&(d=!0,m=g);return d?(ee("SentenceID",m),void G()):(V(),void G())}}else if("jump_varBelow"===e){t=t.split(";")[0],console.log(t);var v=(t=t.split(","))[0];v=v.split(":");var f=t[1];if(H().currentInfo.GameVar[v[0]]<parseInt(v[1])){for(var h=f,j=!1,b=0,x=0;x<H().currentScene.length;x++)"label"===H().currentScene[x][0]&&H().currentScene[x][1]===h&&(j=!0,b=x);return j?(ee("SentenceID",b),void G()):(V(),void G())}}console.log(H().currentInfo.GameVar),V(),G()}(n,a);ee("command",d(te("SentenceID")).name),ee("showName",d(te("SentenceID")).name),ee("showText",d(te("SentenceID")).text),ee("vocal",d(te("SentenceID")).vocal),D.VC_textShow(te("showName"),te("showText")),""!==te("all").vocal&&D.playVocal(),e=!0}if(V(),e)if(H().CurrentBacklog.length<=500){var h=JSON.stringify(te("all"));H().CurrentBacklog[H().CurrentBacklog.length]=JSON.parse(h)}else{H().CurrentBacklog.shift();var j=JSON.stringify(te("all"));H().CurrentBacklog[H().CurrentBacklog.length]=JSON.parse(j)}}}function b(e){if(1===H().auto&&"on"===e){setTimeout((function(){1===H().auto&&G()}),H().autoWaitTime)}}}function V(){ee("SentenceID",te("SentenceID")+1)}var z=35,M={Game_name:"WebGAL Demo",Game_key:"WG_default",Title_img:"Title.png",Title_bgm:"\u590f\u5f71.mp3"},A="",W=0,R={SceneName:"",SentenceID:0,bg_Name:"",fig_Name:"",fig_Name_left:"",fig_Name_right:"",showText:"",showName:"",command:"",choose:"",vocal:"",bgm:"",miniAvatar:"",GameVar:{}},q=[],F=[],J=[],U=0,Q=0,K={font_size:"medium",play_speed:"medium"},Y={setAutoWaitTime:1500,autoWaitTime:1500,textShowWaitTime:z,GameInfo:M,currentScene:A,auto:0,fast:W,onTextPreview:0,showingText:!1,hideTextStatus:!1,currentInfo:R,Saves:q,SaveBacklog:F,CurrentBacklog:J,currentSavePage:U,currentLoadPage:Q,Settings:K};function H(){return Y}function X(){if(localStorage.getItem(M.Game_key)){var e=JSON.parse(localStorage.getItem(M.Game_key));q=e.SavedGame,F=e.SavedBacklog,U=e.SP,Q=e.LP,K=e.cSettings}}function Z(){var e={SavedGame:q,SavedBacklog:F,SP:U,LP:Q,cSettings:K};localStorage.setItem(M.Game_key,JSON.stringify(e))}function $(){localStorage.setItem(M.Game_key,JSON.stringify({SavedGame:[],SavedBacklog:[],SP:0,LP:0,cSettings:{font_size:"medium",play_speed:"medium"}}))}function ee(e,t){if("all"===e)for(var n in t)R.hasOwnProperty(n)&&(R[n]=t[n]);else R[e]=t}function te(e){return"all"===e?R:R[e]}function ne(e){A="";var t=null;t=new XMLHttpRequest,console.log("now read scene"),null!=t&&(t.open("get",e,!0),t.send(),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){A=(A=t.responseText).split("\n");for(var n=0;n<A.length;n++){var a=A[n].split(";")[0],c=a.split(":")[0].length,i=A[n].split(":")[0];i=i.split(";")[0];var o=a.slice(c+1);A[n]=A[n].split(":"),A[n][0]=i,A[n][1]=o}console.log("Read scene complete."),console.log(A),H().currentScene=A,ee("SentenceID",0),G(),y.onSceneChange(e)}})}var ae=n.p+"static/media/closeBlack.48c8b5c9.svg",ce=n.p+"static/media/closeWhite.a1886903.svg",ie=n.p+"static/media/up.17da50db.svg",oe=n.p+"static/media/cross.9d528190.svg",se=n(29),le=n(30),re=n(31),ue=n(32),de=n(33),me=n(34),ge=n(35);var ve=function(){return Object(O.jsxs)("div",{className:"Stage",children:[Object(O.jsx)("div",{id:"intro",className:"intro_styl"}),Object(O.jsx)("div",{id:"MesModel"}),Object(O.jsx)("div",{id:"Title",children:Object(O.jsx)("div",{id:"TitleModel",children:Object(O.jsxs)("div",{id:"setButtonBottom",children:[Object(O.jsx)("div",{className:"TitleSingleButton",id:"leftTitleButton",onClick:S.hideTitle,children:"START"}),Object(O.jsx)("div",{className:"TitleSingleButton",onClick:S.continueGame,children:"CONTINUE"}),Object(O.jsx)("div",{className:"TitleSingleButton",onClick:S.onLoadGame,children:"LOAD"}),Object(O.jsx)("div",{className:"TitleSingleButton",onClick:S.onSetting,children:"CONFIG"}),Object(O.jsx)("div",{className:"TitleSingleButton",onClick:S.exit,children:"EXIT"})]})})}),Object(O.jsx)("div",{id:"mainBackground",onClick:S.clickOnBack}),Object(O.jsx)("div",{id:"figureImage",onClick:S.clickOnBack}),Object(O.jsx)("div",{id:"figureImage_left",onClick:S.clickOnBack}),Object(O.jsx)("div",{id:"figureImage_right",onClick:S.clickOnBack}),Object(O.jsx)("div",{id:"settings",children:Object(O.jsxs)("div",{id:"settingsMainBox",children:[Object(O.jsx)("div",{id:"close",onClick:S.closeSettings,children:Object(O.jsx)("img",{src:ae,className:"closeSVG",alt:"close"})}),Object(O.jsx)("div",{id:"settingsTitle",children:"\u8bbe\u7f6e"}),Object(O.jsx)("div",{id:"settingItems"}),Object(O.jsx)("div",{id:"textPreview"})]})}),Object(O.jsxs)("div",{id:"backlog",children:[Object(O.jsx)("div",{id:"closeBl",onClick:S.closeBacklog,children:Object(O.jsx)("img",{src:ce,className:"closeSVG",alt:"close"})}),Object(O.jsx)("div",{id:"backlogContent"})]}),Object(O.jsx)("div",{id:"Load",className:"LS_Main",children:Object(O.jsxs)("div",{id:"loadMainBox",className:"LS_mainBox",children:[Object(O.jsx)("div",{id:"closeLoad",onClick:S.closeLoad,children:Object(O.jsx)("img",{src:ae,className:"closeSVG",id:"LoadClose",alt:"close"})}),Object(O.jsx)("div",{id:"LoadTitle",children:"\u8bfb\u6863"}),Object(O.jsx)("div",{id:"LoadItems",className:"LS_Items"})]})}),Object(O.jsx)("div",{id:"Save",className:"LS_Main",children:Object(O.jsxs)("div",{id:"saveMainBox",className:"LS_mainBox",children:[Object(O.jsx)("div",{id:"closeSave",onClick:S.closeSave,children:Object(O.jsx)("img",{src:ae,className:"closeSVG",alt:"close"})}),Object(O.jsx)("div",{id:"SaveTitle",children:"\u5b58\u6863"}),Object(O.jsx)("div",{id:"SaveItems",className:"LS_Items"})]})}),Object(O.jsx)("div",{id:"chooseBox"}),Object(O.jsxs)("div",{id:"bottomBox",children:[Object(O.jsxs)("div",{id:"top_control",children:[Object(O.jsx)("span",{className:"top_button",onClick:S.hideTextBox,children:Object(O.jsx)("img",{src:oe,style:{width:"22px",height:"22px"}})}),Object(O.jsx)("span",{className:"top_button",onClick:S.showBacklog,children:Object(O.jsx)("img",{src:ie,style:{width:"25px",height:"25px"}})})]}),Object(O.jsxs)("div",{id:"mainTextWindow",onClick:G,children:[Object(O.jsx)("div",{id:"pName"}),Object(O.jsx)("div",{id:"SceneText"})]}),Object(O.jsxs)("div",{id:"controlBar",children:[Object(O.jsx)("div",{className:"controlButton",onClick:D.playVocal,children:Object(O.jsx)(se.a,{theme:"outline",size:"28",fill:"#f5f5f7"})}),Object(O.jsx)("div",{className:"controlButton",onClick:S.autoNext,id:"autoButton",children:Object(O.jsx)(le.a,{theme:"outline",size:"28",fill:"#f5f5f7"})}),Object(O.jsx)("div",{className:"controlButton",onClick:S.fastNext,id:"fastButton",children:Object(O.jsx)(re.a,{theme:"outline",size:"28",fill:"#f5f5f7"})}),Object(O.jsx)("div",{className:"controlButton",onClick:S.onSaveGame,id:"saveButton",children:Object(O.jsx)(ue.a,{theme:"outline",size:"28",fill:"#f5f5f7"})}),Object(O.jsx)("div",{className:"controlButton",onClick:S.onLoadGame,id:"loadButton",children:Object(O.jsx)(de.a,{theme:"outline",size:"28",fill:"#f5f5f7"})}),Object(O.jsx)("div",{className:"controlButton",onClick:S.onSetting,children:Object(O.jsx)(me.a,{theme:"outline",size:"28",fill:"#f5f5f7"})}),Object(O.jsx)("div",{className:"controlButton",onClick:S.Title,id:"titleButton",children:Object(O.jsx)(ge.a,{theme:"outline",size:"28",fill:"#f5f5f7"})})]}),Object(O.jsx)("div",{id:"miniAvatar"})]}),Object(O.jsx)("div",{id:"bgm"}),Object(O.jsx)("div",{id:"vocal"}),Object(O.jsx)("div",{id:"panic-overlay"})]})};var fe=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(ve,{})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(fe,{})}),document.getElementById("ReactRoot")),he(),X(),"small"===K.font_size?document.getElementById("SceneText").style.fontSize="150%":"medium"===K.font_size?document.getElementById("SceneText").style.fontSize="200%":"large"===K.font_size&&(document.getElementById("SceneText").style.fontSize="250%"),"low"===K.play_speed?z=150:"medium"===K.play_speed?z=50:"fast"===K.play_speed&&(z=10),function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(200===e.status){var t=e.responseText;t=t.split("\n");for(var n=0;n<t.length;n++){var a=t[n].split(";")[0].split(":");switch(a[0]){case"Game_name":M.Game_name=a[1];break;case"Game_key":M.Game_key=a[1];break;case"Title_img":M.Title_img=a[1];break;case"Title_bgm":M.Title_bgm=a[1]}}document.getElementById("Title").style.backgroundImage='url("./game/background/'+M.Title_img+'")',ee("bgm",M.Title_bgm),D.loadBGM(),document.title=M.Game_name}},e.open("GET","game/config.txt"),e.send()}(),D.loadBGM(),function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPod","iPad"],n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}()&&(console.log("now is mobile view"),document.getElementById("bottomBox").style.height="45%",document.getElementById("ReactRoot").style.fontSize="65%")}},[[26,1,2]]]);
//# sourceMappingURL=main.e36c717f.chunk.js.map